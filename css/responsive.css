/* --- Text Color Settings --- */
body[data-text-color="gray"] .story-content {
    color: var(--text-secondary);
}

/* --- Responsive Design --- */
@media (max-width: 1024px) {
    :root {
        --base-font-size: 16px;
    }
}

@media (max-width: 768px) {
    :root {
        --base-font-size: 15px;
    }
}

/* --- Performance Overrides --- */
/*
  This block globally disables intensive effects when the user toggles performance mode.
  - It uses a CSS variable to turn off the hover transform without repeating selectors.
  - It disables all animations via `animation: none !important;`.
*/
body[data-performance-effects="disabled"] {
  --interactive-transform: none; /* Disables the "lift" effect on hover via CSS variable */
}

body[data-performance-effects="disabled"] .app-container::after,
body[data-performance-effects="disabled"] .dialogue-avatar,
body[data-performance-effects="disabled"] .title,
body[data-performance-effects="disabled"] .pc-title,
body[data-performance-effects="disabled"] .npc-title,
body[data-performance-effects="disabled"] .save-card,
body[data-performance-effects="disabled"] .form-section,
body[data-performance-effects="disabled"] .predicted-action,
body[data-performance-effects="disabled"] .button-suggest-context,
body[data-performance-effects="disabled"] .button-suggest-char {
    animation: none !important;
}

body[data-performance-effects="disabled"] .app-container::after {
    opacity: 0 !important;
}

body[data-performance-effects="disabled"] .modal-overlay {
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

body[data-performance-effects="disabled"] .modal-content,
body[data-performance-effects="disabled"] .card,
body[data-performance-effects="disabled"] .game-footer {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background: var(--bg-secondary);
}

body[data-performance-effects="disabled"] .form-section:hover,
body[data-performance-effects="disabled"] .save-card:hover {
    transform: none;
    box-shadow: var(--shadow-sm), inset 0 1px 2px rgba(var(--rgb-bg-primary), 0.5);
}

/* Specifically disable the active state transform in performance mode */
body[data-performance-effects="disabled"] :where(
  .menu-button, .wc-button, .wc-button-icon, .nav-button, .confirmation-button, .save-card-actions button, .load-game-upload-button, .load-game-back-button, .skill-delete-button, .custom-action-button, .action-button, .history-revert-button, .memory-pin-button, .memory-delete-button, .lore-button, .char-detail-tab-button, .relationship-list-item, .quest-item, .kb-item, .save-card,
  .api-key-check-btn, .api-key-close-btn
):active:not(:disabled) {
  transform: none;
}

/* --- Mobile Font & Sizing Adjustments (User Request) --- */

/* Titles - Further Reduced */
body[data-mobile-mode="on"] h1,
body[data-mobile-mode="on"] .title,
body[data-mobile-mode="on"] .wc-title,
body[data-mobile-mode="on"] .game-title {
    font-size: 1.3rem !important;
    letter-spacing: 0.25px !important;
}

body[data-mobile-mode="on"] h2,
body[data-mobile-mode="on"] .pause-title {
    font-size: 1.1rem !important;
}

body[data-mobile-mode="on"] h3,
body[data-mobile-mode="on"] .modal-header h3,
body[data-mobile-mode="on"] .load-game-title {
    font-size: 1.0rem !important;
}

body[data-mobile-mode="on"] h4,
body[data-mobile-mode="on"] .section-title-bar,
body[data-mobile-mode="on"] .kb-category-title,
body[data-mobile-mode="on"] .harem-section h4,
body[data-mobile-mode="on"] .faction-management-tab-container h4,
body[data-mobile-mode="on"] .auction-log-panel h4,
body[data-mobile-mode="on"] .auction-participants-column h4,
body[data-mobile-mode="on"] .combat-group-title,
body[data-mobile-mode="on"] .turn-order-title {
    font-size: 0.9rem !important;
}

/* Buttons - Further Reduced Font & Padding */
body[data-mobile-mode="on"] .menu-button,
body[data-mobile-mode="on"] .wc-button:not(.wc-button-icon),
body[data-mobile-mode="on"] .lore-button,
body[data-mobile-mode="on"] .nav-button:not(.nav-button-icon),
body[data-mobile-mode="on"] .confirmation-button,
body[data-mobile-mode="on"] .gallery-action-button,
body[data-mobile-mode="on"] .toolbar-button,
body[data-mobile-mode="on"] .viewer-action-button,
body[data-mobile-mode="on"] .player-bid-button,
body[data-mobile-mode="on"] .harem-action-button,
body[data-mobile-mode="on"] .custom-action-button:not(.scroll-down-button),
body[data-mobile-mode="on"] .action-button,
body[data-mobile-mode="on"] .load-game-upload-button,
body[data-mobile-mode="on"] .load-game-delete-all-button,
body[data-mobile-mode="on"] .save-card-actions button,
body[data-mobile-mode="on"] .api-key-check-btn,
body[data-mobile-mode="on"] .api-key-close-btn,
body[data-mobile-mode="on"] .api-key-add-btn,
body[data-mobile-mode="on"] .pause-menu-button {
    padding: var(--space-1) var(--space-2) !important; /* Reduced from 8px 12px to 4px 8px */
    font-size: 0.8rem !important; /* Reduced from 0.875rem */
    height: auto !important;
    min-height: 0 !important;
    line-height: 1.4 !important;
}

/* Zoom and Pan container styles */
.zoom-pan-wrapper {
    flex-grow: 1; /* Take up remaining space in the app container's flex direction */
    min-height: 0; /* Necessary for flex-grow in a scrollable/overflow context */
    overflow: hidden; /* This is crucial: clips the scaled content */
    position: relative; /* Establishes a positioning context for the content */
    -webkit-tap-highlight-color: transparent; /* Disable tap highlight on iOS for a native feel */
}

.zoom-pan-content {
    width: 100%;
    height: 100%;
    /* Hint to the browser that this element's transform will change, enabling hardware acceleration. */
    will-change: transform; 
}

/* Ensure the view components fill the content area to be transformed correctly */
.menu-view .card,
.creator-view .wc-container,
.game-view .game-container {
    width: 100%;
    height: 100%;
    box-sizing: border-box;
}

/* For main menu, the card is centered by the app-container. 
   The zoom-pan-content needs to also be a flex container to re-apply that centering. */
.menu-view .zoom-pan-content {
    display: flex;
    justify-content: center;
    align-items: center;
}
